---
title: "Wide or Long" 
author: Damien Jourdain
date: '2020-08-20'
slug: wide-long-formats
type: book
weight: 1
output:
  html_document:
    keep_md: true
---

```{r , echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
```

## When do we encounter wide or long formats ? 

Wide and long formats are generic terms to express how data are stored when you have repeated measurement for one observed unit. You will encounter these formats when using panel or quasi-panel data, i.e. time series, choice experiments, etc.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="522px" height="343px" viewBox="-0.5 -0.5 522 343" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-02-19T16:04:13.800Z&quot; agent=&quot;5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/14.1.8 Chrome/87.0.4280.88 Electron/11.1.1 Safari/537.36&quot; etag=&quot;QrBYW4plEa4KyIkPfFTk&quot; version=&quot;14.1.8&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;pq9GDTyAb-rz4kFnmxVX&quot; name=&quot;Page-1&quot;&gt;7Zpdc6IwFIZ/DZftEAKil13b7l7UmZ1xd7qzN50IKWQKHCemq+6v36ABhcTqzghYWvVC3oQAz5uPc6IWHqerr5zM4wmENLEcO1xZ+NZyHOQ6jpV/7HC9VYaFEHEWqko7Ycr+UiXaSn1lIV1UKgqARLB5VQwgy2ggKhrhHJbVas+QVK86JxHVhGlAEl19ZKGIlerY9q7gG2VRXFx6UJSkpKithEVMQljuSfjOwmMOILbf0tWYJjm9Asz2vPsDpeWdcZqJU05Y//5xNYPJxL/1fk7I5O5x+vTrCg22zfwhyat6ZHW3Yl0w4PCahTRvBVn4yzJmgk7nJMhLl9J1qcUiTVTxQnB4oWNIgG/OxvbmJUueWZLs6febl9SVdWS2uV5ek/BA9YRB2WJBH0tF3TLlgq4OwkAlYtk5KaRU8LWsok5wlSmqW6KROl7uTC49jvf8LUWiOlZUNr1DL78o+v/hBD5uRP7ETPbNBzKjyXdYMMEgk0UzEAJSCaaocJOwKC8QUHcnJvO8sXQV5eP1ekYWLLgGLmKIICPJk+CMZFF+wbpf6CZ/b9vY9uPcqsULFUGsDs7gCxoeN2Zg8GXQlC3updnCQRB1gauc1uGBpQ3FsqQJo4a6Ub7BKL8po5DT1UxW6ufAiqpYHQPWoQEragzrCfPS5WP1q1Qx0qkir1WsJ8wr7w+r2zlWrw9YtUnA07m2i3X4uQqanfK92irodbwKjvowAPzj/b/VRbBI4fpF1RBatDtbF4/w0ZJPPKrFzoYkB5mynNKy81txQvT8AdJP9wRnWk0/nYvbFriQlVdzquv80+lF6OnWQk9TpjRqdY3obIOyUayGTKldrH4vsDrHA8V2I5rPROmAU8MLS5ScXiRK9Xml8wGAOwvpm8Tq2h1P1/iE8PwdYsVdY+3F5rYWXPhdY+3F5rY2txoyjHax6sHFIwupVCx8rwGWDy7eophBVk+zlURU3BFIUJQbApKUheEmuDDZtjPWfjNbf4ZMqI0W7BXH6vbROeyr5Yem3yaMeyyN2adHHA+QRZ/eGTbI6j8uN2iePNz9B2dTtvdXJnz3Dw==&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="1" y="61" width="200" height="200" rx="12" ry="12" fill="#ffffff" stroke="#000000" stroke-width="3" pointer-events="all"/><path d="M 141 121 L 141 61 L 201 121 Z" fill="#1a1a1a" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 141 121 L 141 51 L 211 121 Z" fill="#ffffff" stroke="#ffffff" stroke-miterlimit="10" transform="rotate(-180,176,86)" pointer-events="all"/><rect x="71" y="151" width="80" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="31" y="181" width="150" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="31" y="211" width="150" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="71" y="121" width="50" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><path d="M 136 126 L 136 56 L 206 126 Z" fill="#ffffff" stroke="#ffffff" stroke-miterlimit="10" transform="rotate(-180,171,91)" pointer-events="all"/><rect x="31" y="121" width="80" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="31" y="151" width="150" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="351" y="61" width="160" height="280" rx="9.6" ry="9.6" fill="#ffffff" stroke="#000000" stroke-width="3" pointer-events="all"/><path d="M 451 121 L 451 61 L 511 121 Z" fill="#1a1a1a" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 451 121 L 451 51 L 521 121 Z" fill="#ffffff" stroke="#ffffff" stroke-miterlimit="10" transform="rotate(-180,486,86)" pointer-events="all"/><rect x="371" y="181" width="90" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="371" y="211" width="90" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="381" y="121" width="50" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><path d="M 446 126 L 446 56 L 516 126 Z" fill="#ffffff" stroke="#ffffff" stroke-miterlimit="10" transform="rotate(-180,481,91)" pointer-events="all"/><rect x="371" y="121" width="50" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="371" y="271" width="90" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="371" y="301" width="90" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="371" y="241" width="90" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="371" y="151" width="90" height="10" rx="1.5" ry="1.5" fill="#000000" stroke="#000000" pointer-events="all"/><rect x="1" y="11" width="160" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 21px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 35px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Wide ?</div></div></div></foreignObject><text x="81" y="32" fill="#000000" font-family="Helvetica" font-size="35px" text-anchor="middle" font-weight="bold">Wide ?</text></switch></g><rect x="341" y="11" width="160" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 21px; margin-left: 342px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 35px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">Long?</div></div></div></foreignObject><text x="421" y="32" fill="#000000" font-family="Helvetica" font-size="35px" text-anchor="middle" font-weight="bold">Long?</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

## Wide format
With a wide format, a subject's repeated responses will be in a single row, and each response is in a separate column.

In the following table, the respondents responded three times to a question. The answers are stored in the three columns (from ans_1 to ans_3). 

All the other columns correspond to unique characteristics (or answers) of the respondents. They are not repeated.

```{r , echo=FALSE}
set.seed(12345)
N <- 5
dt <- tibble(resp_id=rep(1:N), age = sample(30:50, N, TRUE), 
                city = sample(c("Pretoria", "Cape Town"), N, TRUE),
                ans_1=sample(3,N,TRUE),
                ans_2=sample(3,N,TRUE),
                ans_3=sample(2,N,TRUE))
dt[2,4] <- NA   #create a missing value
dt
```

## Long format

With a long format, each row correspond to one response. So each respondent will have data in multiple rows. 


```{r, echo=FALSE}
melted <- pivot_longer(dt, cols=c(ans_1, ans_2, ans_3), names_to = "Question_ch", values_to = "Answer") %>%
  mutate(Question = rep(1:3, times=5)) %>% select(resp_id, age, city, Question, Answer)
melted
```

As you can see, each respondents are described in three rows, one per question. The question is described by a question id, and an answer. 

Note also variables that donâ€™t change across responses will have the same value in all the rows of the corresponding respondent. This leads to some repetitions, but may be useful when conducting data analysis. 

Depending on data analysis needs, you will have to change from one format to another. Therefore, it is important that you master the functions to reshape data in one format or another. 

## A graphical representation

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="472px" height="492px" viewBox="-0.5 -0.5 472 492" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-02-19T15:27:24.568Z&quot; agent=&quot;5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/14.1.8 Chrome/87.0.4280.88 Electron/11.1.1 Safari/537.36&quot; etag=&quot;RmgFxYViAssO80_tLUFc&quot; version=&quot;14.1.8&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;_otV9Q0teWW32TYtsup5&quot; name=&quot;Page-1&quot;&gt;1Zhtb5swEMc/DS9bgU1C8nKFZJu0SZsi7aHvPHDAncMhx0mgn36mHBBCo24t0UiQgu9v+2x+d3ZMLOpv8veKZclniLi0iB3lFg0sQohNHXMrlaJSHMdzKyVWIkKtFVbikaNoo7oTEd92GmoAqUXWFUNIUx7qjsaUgkO32Rpkd9SMxbwnrEIm++p3EekEVWLbbcUHLuKkHnpa12xY3RqFbcIiOBxJdGFRXwHoqrTJfS5LfDWYqt/yTG0zM8VT/TcdHn9N778u2UOyX9+4WSC2mffuBr3smdzhE38MUNvqoqagYJdGvPRjW/TukAjNVxkLy9qDCbzREr2RxnJMcS2k9EGCeupLZ3Z5GR1H4krz/OwjOA0Yk1McNlyrwjTBDi6iLLrmoY1MLSVHMWlEhskQN45bXKaAxP6BHnmGnrHJoAAXTjBZeMMAnI8MIO0B/MaUEYZNQd9fms8wBJ2x5aB7BuGwSWhScBa4AyEcWxZOrmoTpORV+Nz5pfBNr20XpN7ICHpXtw26r0vCy63h+TMIy+KgOTgtr4EAji0H6xP3WVagdAIxpEx+AsiQ0APXusBjO9tp6PLjudA/jso/S1e3ZIJmkKPrJ6NAY6sV/G5O2+1vDo96R/UT2GbysFMhf/nAoZmKuX5pRfaDp7hkWuy78xg+FP11Xz78Cs0UUnO7u1B0vP8YHfeN1LHrFxBm5LN7FXXJreOS2cTD767DKjfQx0kkm0m9Ibj9l4axH9hOATavERfY7Y3ZvhJXzNu/FujiDw==&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="0" y="0" width="40" height="240" fill="#808080" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 120px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ID1</div></div></div></foreignObject><text x="20" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ID1</text></switch></g><rect x="50" y="0" width="40" height="240" fill="#e1d5e7" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 120px; margin-left: 51px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ID 2</div></div></div></foreignObject><text x="70" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ID 2</text></switch></g><rect x="100" y="0" width="40" height="240" fill="#ccffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 120px; margin-left: 101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Var 1</div></div></div></foreignObject><text x="120" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Var 1</text></switch></g><rect x="150" y="0" width="40" height="240" fill="#d5e8d4" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 120px; margin-left: 151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Var 2</div></div></div></foreignObject><text x="170" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Var 2</text></switch></g><rect x="280" y="0" width="40" height="490" fill="#808080" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 245px; margin-left: 281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ID1</div></div></div></foreignObject><text x="300" y="249" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ID1</text></switch></g><rect x="330" y="0" width="40" height="490" fill="#e1d5e7" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 245px; margin-left: 331px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ID 2</div></div></div></foreignObject><text x="350" y="249" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ID 2</text></switch></g><rect x="380" y="0" width="40" height="240" fill="#ccffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 120px; margin-left: 381px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Var 1</div></div></div></foreignObject><text x="400" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Var 1</text></switch></g><rect x="430" y="0" width="40" height="490" fill="#e6e6e6" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 245px; margin-left: 431px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Value</div></div></div></foreignObject><text x="450" y="249" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Value</text></switch></g><path d="M 140 60 L 368.33 112.69" fill="none" stroke="#000000" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 375.64 114.38 L 364.77 117 L 368.33 112.69 L 367.02 107.26 Z" fill="#000000" stroke="#000000" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/><path d="M 190 180 L 369.93 295.67" fill="none" stroke="#000000" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 376.24 299.72 L 365.12 298.52 L 369.93 295.67 L 370.53 290.11 Z" fill="#000000" stroke="#000000" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/><rect x="380" y="250" width="40" height="240" fill="#d5e8d4" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 370px; margin-left: 381px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Var 2</div></div></div></foreignObject><text x="400" y="374" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Var 2</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>